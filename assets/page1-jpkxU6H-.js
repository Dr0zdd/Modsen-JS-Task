import{I as i}from"./theme-manager-DW4RnRNe.js";const u="St0VYm9jqMOF8JlcPn-TlyZKGsTyhbKANE2lLLGvIdc";async function d(t){const e=`https://api.unsplash.com/search/photos?query=${t}&client_id=${u}&per_page=12`;try{const n=await fetch(e);return n.ok?(await n.json()).results:(console.error(`Ошибка: ${n.status}`),[])}catch(n){return console.error("Ошибка загрузки изображений:",n),[]}}let r=[];async function m(t="nature"){try{r=await d(t),l(r)}catch(e){console.error("Ошибка загрузки изображений:",e)}}async function s(){return r.length?r:await d("nature")}function l(t){const e=document.querySelector(".card__wrapper");e&&(e.innerHTML=t.length?t.map((n,a)=>`
            <article class="card__item" data-id="${n.id}" data-index="${a+1}"> 
                <img class="card__img" src="${n.urls.regular}" alt="${n.alt_description||"Без описания"}">
            </article>
        `).join(""):'<p class="no-results">Изображения не найдены</p>')}function g(t){if(!r.length)return;document.querySelector(".modal")?.remove();const e=r.findIndex(o=>o.id===t);if(e===-1)return;const n=new i(r.map(o=>o.urls.regular),e);n.buildModal(),document.body.classList.add("modal-open");const a=()=>{document.body.classList.remove("modal-open")};n.modal.querySelector(".modal__close").addEventListener("click",a),n.modal.querySelector(".modal__overlay").addEventListener("click",a)}document.querySelector(".card__wrapper")?.addEventListener("click",t=>{const e=t.target.closest(".card__item");e&&g(e.dataset.id)});document.addEventListener("DOMContentLoaded",m);const c=document.getElementById("searchInput"),p=/^[a-zA-Z0-9!$&*\-=_^`|~#%'+/?_{}]+$/;document.addEventListener("DOMContentLoaded",()=>{document.getElementById("searchButton")?.addEventListener("click",f),setTimeout(h,1e3)});async function f(){const t=c?.value.trim().toLowerCase();if(!t||t.length<3||!p.test(t)){c.classList.add("invalid");const a=await s();l(a);return}c.classList.remove("invalid");const e=await s(),n=y(e,t);l(n.length?n:e)}function y(t,e){return t.filter(({alt_description:n,id:a},o)=>(n||"").toLowerCase().includes(e)||String(a)===e||String(o+1)===e)}async function h(){const t=await s();t.length&&t.forEach(({id:e,slug:n},a)=>console.log(`${a+1}. ID: ${e} | Slug: ${n}`))}
